<!DOCTYPE html>
<html>
<head>
<style>
* {
    box-sizing: border-box;
}

body {
    font-family: Arial, Helvetica, sans-serif;
}

/* Style the header */
header {
    background-color: #ffffff;
    padding: 30px;
    text-align: center;
    font-size: 35px;
    color: white;
}

/* Create two columns/boxes that floats next to each other */

article {
    float: left;
    padding: 20px;
    width: 90%;
    background-color: #ffffff;
}

/* Clear floats after the columns */
section:after {
    content: "";
    display: table;
    clear: both;
}

/* Style the footer */
footer {
    background-color: #ffffff;
    padding: 10px;
    text-align: center;
    color: white;
}

/* Responsive layout - makes the two columns/boxes stack on top of each other instead of next to each other, on small screens */
@media (max-width: 600px) {
    article {
    width: 100%;
    height: auto;
    }
}
</style>
</head>
<body>

<input type="button" name="display_agenda" value="Agenda" onclick="displayAgenda();"/>
<input type="button" name="sync" value="Sync" onclick="syncCalendars();"/>
<input type="button" name="sync_all" value="Full Sync" onclick="syncCalendarsFull();"/>
<input type="button" name="list_calendars" value="List Calendars" onclick="listCalendars();"/>
<button name="garminconnectoutput" id="garminconnectoutput"> &nbsp; </button>

<br>

<article id="main_article">
DISPLAY_TEXT
</article>

<article id="sub_article">
&nbsp;
</article>

<script language="JavaScript" type="text/javascript">
    !function() {
        displayAgenda();
    }()
    function displayAgenda() {
        let url = "/calendar/agenda";
        let xmlhttp = new XMLHttpRequest();
        xmlhttp.onload = function f() {
            document.getElementById("sub_article").innerHTML = "&nbsp;";
            document.getElementById("main_article").innerHTML = xmlhttp.responseText;
            document.getElementById("garminconnectoutput").innerHTML = "done";
        }
        xmlhttp.open("GET", url, true);
        xmlhttp.send(null);
        document.getElementById("garminconnectoutput").innerHTML = "running";
    }
    function syncCalendars() {
        let url = "/calendar/sync_calendars";
        let xmlhttp = new XMLHttpRequest();
        xmlhttp.onload = function f() {
            document.getElementById("sub_article").innerHTML = xmlhttp.responseText;
            document.getElementById("garminconnectoutput").innerHTML = "done";
        }
        xmlhttp.open("GET", url, true);
        xmlhttp.send(null);
        document.getElementById("garminconnectoutput").innerHTML = "running";
    }
    function syncCalendarsFull() {
        let url = "/calendar/sync_calendars_full";
        let xmlhttp = new XMLHttpRequest();
        xmlhttp.onload = function f() {
            document.getElementById("sub_article").innerHTML = xmlhttp.responseText;
            document.getElementById("garminconnectoutput").innerHTML = "done";
        }
        xmlhttp.open("GET", url, true);
        xmlhttp.send(null);
        document.getElementById("garminconnectoutput").innerHTML = "running";
    }
    function deleteEvent(gcal_id, event_id) {
        let url = "/calendar/delete_event";
        let data = JSON.stringify({'gcal_id': gcal_id, 'event_id': event_id});
        let xmlhttp = new XMLHttpRequest();
        xmlhttp.onload = function f() {
            document.getElementById("sub_article").innerHTML = xmlhttp.responseText;
            document.getElementById("garminconnectoutput").innerHTML = "done";
        }
        xmlhttp.setRequestHeader('Content-Type', 'application/json');
        xmlhttp.open("DELETE", url, true);
        xmlhttp.send(data);
        document.getElementById("garminconnectoutput").innerHTML = "running";
    }
    function eventDetail(gcal_id, event_id) {
        let url = "/calendar/event_detail";
        let data = JSON.stringify({'gcal_id': gcal_id, 'event_id': event_id});
        let xmlhttp = new XMLHttpRequest();
        xmlhttp.onload = function f() {
            document.getElementById("sub_article").innerHTML = xmlhttp.responseText;
            document.getElementById("garminconnectoutput").innerHTML = "done";
        }
        xmlhttp.open("POST", url, true);
        xmlhttp.setRequestHeader('Content-Type', 'application/json');
        xmlhttp.send(data);
        document.getElementById("garminconnectoutput").innerHTML = "running";
    }
    function listCalendars() {
        let url = "/calendar/list_calendars";
        let xmlhttp = new XMLHttpRequest();
        xmlhttp.onload = function f() {
            document.getElementById("main_article").innerHTML = xmlhttp.responseText;
            document.getElementById("sub_article").innerHTML = "&nbsp;";
            document.getElementById("garminconnectoutput").innerHTML = "done";
        }
        xmlhttp.open("GET", url, true);
        xmlhttp.send(null);
        document.getElementById("garminconnectoutput").innerHTML = "running";
    }
    function listEvents(calendar_name) {
        let url = "/calendar/list_events?calendar_name=" + calendar_name;
        let xmlhttp = new XMLHttpRequest();
        xmlhttp.onload = function f() {
            document.getElementById("main_article").innerHTML = xmlhttp.responseText;
            document.getElementById("sub_article").innerHTML = "&nbsp;";
            document.getElementById("garminconnectoutput").innerHTML = "done";
        }
        xmlhttp.open("GET", url, true);
        xmlhttp.send(null);
        document.getElementById("garminconnectoutput").innerHTML = "running";
    }
</script>

</body>
</html>
